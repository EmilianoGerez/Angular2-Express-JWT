{"version":3,"sources":["user/components/user-form.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAwB,eAAe,CAAC,CAAA;AACxC,6BAA0B,0BAA0B,CAAC,CAAA;AACrD,uBAAqE,iBAAiB,CAAC,CAAA;AACvF,gCAA6B,4BAA4B,CAAC,CAAA;AAC1D,6BAA0B,0BAA0B,CAAC,CAAA;AASrD;IAME,2BAAY,EAAc,EACN,YAAwB;QAAxB,iBAAY,GAAZ,YAAY,CAAY;QAJ5C,WAAM,GAAW,KAAK,CAAC;QACvB,YAAO,GAAW,KAAK,CAAC;QAKtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC;YACvB,SAAS,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC;oBACjC,mBAAU,CAAC,QAAQ;oBACnB,mBAAU,CAAC,SAAS,CAAC,CAAC,CAAC;iBACxB,CAAC,CAAC;YACH,QAAQ,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC;oBAChC,mBAAU,CAAC,QAAQ;oBACnB,mBAAU,CAAC,SAAS,CAAC,CAAC,CAAC;iBACxB,CAAC,CAAC;YACH,KAAK,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC;oBAC7B,mBAAU,CAAC,QAAQ;oBACnB,gCAAc,CAAC,UAAU;iBAC1B,CAAC,EAAE,gCAAc,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAClD,QAAQ,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC;oBAChC,mBAAU,CAAC,QAAQ;oBACnB,mBAAU,CAAC,SAAS,CAAC,CAAC,CAAC;oBACvB,mBAAU,CAAC,SAAS,CAAC,EAAE,CAAC;iBACzB,CAAC,CAAC;YACH,UAAU,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,QAAQ,CAAC;SACtC,EAAE,EAAC,SAAS,EAAE,gCAAc,CAAC,aAAa,EAAC,CAAC,CAAC;IAChD,CAAC;IAED,oCAAQ,GAAR,UAAS,IAAQ;QAAjB,iBAUC;QATC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC;aAC3B,SAAS,CACR;YACE,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,EACD,UAAC,GAAO;YACN,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;IACT,CAAC;IAEO,uCAAW,GAAnB,UAAoB,GAAO;QACzB,IAAI,WAAW,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,MAAM,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,KAAK,cAAc;gBACjB,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,iBAAiB;oBACvB,GAAG,EAAE,iCAAiC;iBACvC,CAAC;gBACF,KAAK,CAAC;YACR,KAAK,SAAS;gBACZ,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,iBAAiB;oBACvB,GAAG,EAAE,kBAAkB;iBACxB,CAAC;gBACF,KAAK,CAAC;YACR;gBACE,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,QAAQ;oBACd,GAAG,EAAE,uBAAuB;iBAC7B,CAAC;QACN,CAAC;IACH,CAAC;IAzEH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,WAAW,EAAE,8CAA8C;YAC3D,UAAU,EAAE,CAAC,wBAAe,CAAC;YAC7B,SAAS,EAAE,CAAC,0BAAW,CAAC;SACzB,CAAC;;yBAAA;IAqEF,wBAAC;AAAD,CAnEA,AAmEC,IAAA;AAnEY,yBAAiB,oBAmE7B,CAAA","file":"user-form.component.js","sourcesContent":["import {Component} from \"@angular/core\";\r\nimport {UserService} from \"../services/user.service\";\r\nimport {Validators, FormBuilder, ControlGroup, FORM_DIRECTIVES} from \"@angular/common\";\r\nimport {UserValidators} from \"../classes/user.validators\";\r\nimport {AuthService} from \"../services/auth.service\";\r\n\r\n@Component({\r\n  selector: 'user-form',\r\n  templateUrl: './app/user/templates/user-form.template.html',\r\n  directives: [FORM_DIRECTIVES],\r\n  providers: [AuthService]\r\n})\r\n\r\nexport class UserFormComponent {\r\n  userForm:ControlGroup;\r\n  errorMsg:any;\r\n  isSent:boolean = false;\r\n  sending:boolean = false;\r\n\r\n  constructor(fb:FormBuilder,\r\n              private _userService:UserService) {\r\n\r\n    this.userForm = fb.group({\r\n      firstName: ['', Validators.compose([\r\n        Validators.required,\r\n        Validators.minLength(3)\r\n      ])],\r\n      lastName: ['', Validators.compose([\r\n        Validators.required,\r\n        Validators.minLength(3)\r\n      ])],\r\n      email: ['', Validators.compose([\r\n        Validators.required,\r\n        UserValidators.validEmail\r\n      ]), UserValidators.emailUnique(this._userService)],\r\n      password: ['', Validators.compose([\r\n        Validators.required,\r\n        Validators.minLength(8),\r\n        Validators.maxLength(15)\r\n      ])],\r\n      repassword: ['', Validators.required]\r\n    }, {validator: UserValidators.passwordMatch});\r\n  }\r\n\r\n  onSubmit(form:any) {\r\n    this._userService.create(form)\r\n      .subscribe(\r\n        () => {\r\n          this.isSent = true;\r\n          this.sending = false;\r\n        },\r\n        (err:any) => {\r\n          this.setErrorMsg(err);\r\n        });\r\n  }\r\n\r\n  private setErrorMsg(err:any) {\r\n    let errResponse = err.json();\r\n    this.sending = false;\r\n\r\n    switch (errResponse.error) {\r\n      case 'invalidEmail':\r\n        this.errorMsg = {\r\n          head: 'Invalid Email!!',\r\n          msg: 'please verify your input email.'\r\n        };\r\n        break;\r\n      case 'sending':\r\n        this.errorMsg = {\r\n          head: 'Error Sending!!',\r\n          msg: 'please try again'\r\n        };\r\n        break;\r\n      default:\r\n        this.errorMsg = {\r\n          head: 'Oops!!',\r\n          msg: 'something went wrong.'\r\n        };\r\n    }\r\n  }\r\n}\r\n\r\n\r\n"]}