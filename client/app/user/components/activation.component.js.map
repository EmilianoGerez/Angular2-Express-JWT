{"version":3,"sources":["user/components/activation.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAgC,eAAe,CAAC,CAAA;AAChD,uBAAqE,iBAAiB,CAAC,CAAA;AACvF,kCAA6C,4BAA4B,CAAC,CAAA;AAC1E,6BAA0B,0BAA0B,CAAC,CAAA;AASrD;IAQE,6BAAoB,EAAc,EACd,YAAwB,EACxB,OAAmB;QAFnB,OAAE,GAAF,EAAE,CAAY;QACd,iBAAY,GAAZ,YAAY,CAAY;QACxB,YAAO,GAAP,OAAO,CAAY;QAPvC,kBAAa,GAAW,KAAK,CAAC;QAE9B,gBAAW,GAAW,KAAK,CAAC;QAC5B,YAAO,GAAW,KAAK,CAAC;QAMtB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,KAAK,CAAC;YAC7B,IAAI,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,QAAQ,CAAC;SAChC,CAAC,CAAC;IAEL,CAAC;IAED,sCAAQ,GAAR;QACE,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEpC,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YAC7B,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IAED,sCAAQ,GAAR,UAAS,SAAa;QAAtB,iBAaC;QAZC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,SAAS,CAAC;aAClC,SAAS,CACR,UAAA,GAAG;YACD,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,EACD,UAAA,GAAG;YACD,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACT,CAAC;IAEO,sCAAQ,GAAhB,UAAiB,GAAO;QACtB,IAAI,WAAW,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;QAE7B,MAAM,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,KAAK,aAAa;gBAChB,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,gBAAgB;oBACtB,GAAG,EAAE,gCAAgC;iBACtC,CAAC;gBACF,KAAK,CAAC;YACR,KAAK,aAAa;gBAChB,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,gBAAgB;oBACtB,GAAG,EAAE,oCAAoC;iBAC1C,CAAC;gBACF,KAAK,CAAC;YACR;gBACE,IAAI,CAAC,QAAQ,GAAG;oBACd,IAAI,EAAE,QAAQ;oBACd,GAAG,EAAE,uBAAuB;iBAC7B,CAAC;QACN,CAAC;IACH,CAAC;IAxEH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;YAC3B,WAAW,EAAE,oDAAoD;YACjE,UAAU,EAAE,CAAC,wBAAe,EAAE,qCAAiB,CAAC;YAChD,SAAS,EAAE,CAAC,0BAAW,CAAC;SACzB,CAAC;;2BAAA;IAoEF,0BAAC;AAAD,CAlEA,AAkEC,IAAA;AAlEY,2BAAmB,sBAkE/B,CAAA","file":"activation.component.js","sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {FormBuilder, ControlGroup, Validators, FORM_DIRECTIVES} from '@angular/common';\r\nimport {ROUTER_DIRECTIVES, RouteParams} from '@angular/router-deprecated';\r\nimport {AuthService} from \"../services/auth.service\";\r\n\r\n@Component({\r\n  selector: 'activation-form',\r\n  templateUrl: './app/user/templates/activation-form.template.html',\r\n  directives: [FORM_DIRECTIVES, ROUTER_DIRECTIVES],\r\n  providers: [AuthService]\r\n})\r\n\r\nexport class ActivationComponent implements OnInit {\r\n  activationForm:ControlGroup;\r\n  codeModel:string;\r\n  disabledInput:boolean = false;\r\n  errorMsg:any;\r\n  isActivated:boolean = false;\r\n  sending:boolean = false;\r\n\r\n  constructor(private fb:FormBuilder,\r\n              private _authService:AuthService,\r\n              private _params:RouteParams) {\r\n\r\n    this.activationForm = fb.group({\r\n      code: ['', Validators.required]\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    let code = this._params.get('code');\r\n\r\n    if (!code || code === 'null') {\r\n      return;\r\n    }\r\n    this.disabledInput = true;\r\n    this.codeModel = code;\r\n  }\r\n\r\n  onSubmit(formValue:any) {\r\n    this.errorMsg = false;\r\n    this.sending = true;\r\n    this._authService.activate(formValue)\r\n      .subscribe(\r\n        res => {\r\n          this.isActivated = true;\r\n          this.sending = false;\r\n        },\r\n        err => {\r\n          this.sending = false;\r\n          this.setError(err);\r\n        });\r\n  }\r\n\r\n  private setError(err:any) {\r\n    let errResponse = err.json();\r\n\r\n    switch (errResponse.error) {\r\n      case 'invalidCode':\r\n        this.errorMsg = {\r\n          head: 'Invalid Code!!',\r\n          msg: 'please verify your input code.'\r\n        };\r\n        break;\r\n      case 'expiredCode':\r\n        this.errorMsg = {\r\n          head: 'Expired Code!!',\r\n          msg: 'please send a new activation email'\r\n        };\r\n        break;\r\n      default:\r\n        this.errorMsg = {\r\n          head: 'Oops!!',\r\n          msg: 'something went wrong.'\r\n        };\r\n    }\r\n  }\r\n}\r\n\r\n"]}