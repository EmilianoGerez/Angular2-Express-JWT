{"version":3,"sources":["shared/classes/private-route.class.ts"],"names":[],"mappings":";AACA,6BAAyC,cAAc,CAAC,CAAA;AAExD;IAGE,0BAAoB,OAAc,EACd,IAAY;QADZ,YAAO,GAAP,OAAO,CAAO;QACd,SAAI,GAAJ,IAAI,CAAQ;QAHhC,eAAU,GAAG,IAAI,wBAAS,EAAE,CAAC;IAI7B,CAAC;IAED,2CAAgB,GAAhB,UAAiB,IAAyB,EAAE,IAAyB;QACnE,sBAAsB;QACtB,EAAE,CAAC,CAAC,CAAC,8BAAe,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACvC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACtC,CAAC;IACH,CAAC;IAED,sCAAW,GAAX;QACE,IAAI,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC7C,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,MAAM,CAAC;QACT,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;IACjD,CAAC;IACH,uBAAC;AAAD,CAvBA,AAuBC,IAAA;AAvBY,wBAAgB,mBAuB5B,CAAA","file":"private-route.class.js","sourcesContent":["import {OnActivate, ComponentInstruction, Router} from '@angular/router-deprecated';\r\nimport {tokenNotExpired, JwtHelper} from \"angular2-jwt\";\r\n\r\nexport class PrivateComponent implements OnActivate {\r\n  _jwtHelper = new JwtHelper();\r\n\r\n  constructor(private _router:Router,\r\n              private role?:string) {\r\n  }\r\n\r\n  routerOnActivate(next:ComponentInstruction, prev:ComponentInstruction) {\r\n    // verify is logged in\r\n    if (!tokenNotExpired()) {\r\n      this._router.navigateByUrl('/login');\r\n    } else if (this.role && this.getUserRole() !== this.role) {\r\n      this._router.navigateByUrl('/home');\r\n    }\r\n  }\r\n\r\n  getUserRole() {\r\n    let token = localStorage.getItem('id_token');\r\n    if (!token) {\r\n      return;\r\n    }\r\n    return this._jwtHelper.decodeToken(token).role;\r\n  }\r\n}\r\n"]}